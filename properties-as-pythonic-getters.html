<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="" />
    <meta name="author" content="Simon Larsén" />
    <meta name="generator" content="Pelican (VoidyBootstrap theme)" />

    <title>Properties as Pythonic getters - slar.se</title>

   
        <link rel="stylesheet"
              href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
              integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
              crossorigin="anonymous" />
      <link rel="stylesheet"
            href="https://use.fontawesome.com/releases/v5.0.13/css/all.css"
            integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp"
            crossorigin="anonymous">


      <link rel="stylesheet" href="https://slar.se/theme/css/pygment.css" />
      <link rel="stylesheet" href="https://slar.se/theme/css/voidybootstrap.css" />

    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js" integrity="sha384-FFgGfda92tXC8nCNOxrCQ3R8x1TNkMFqDZVQdDaaJiiVbjkPBXIJBx0o7ETjy8Bh" crossorigin="anonymous"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js" integrity="sha384-ZoaMbDF+4LeFxg6WdScQ9nnR1QC2MIRxA1O9KWEXQwns1G8UNyIEZIQidzb0T1fo" crossorigin="anonymous"></script>
    <![endif]-->

    <link rel="shortcut icon" href="https://slar.se/favicon.ico" />
        <link href="https://slar.se/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="slar.se Atom Feed" />
  </head>

  <body>
   
    <nav class="navbar navbar-default">
      <div class="container">
	   <div class="navbar-header">
		<button type="button" class="navbar-toggle" 
				data-toggle="collapse" data-target="#main-navbar-collapse">
		  <span class="sr-only">Toggle navigation</span>
		  <span class="icon-bar"></span>
		  <span class="icon-bar"></span>
		  <span class="icon-bar"></span>
		</button>
		<a class="navbar-brand" href="https://slar.se/" rel="home">
          <i class="fas fa-home fa-fw fa-lg"> </i> </a>
       </div>

      <div class="collapse navbar-collapse" id="main-navbar-collapse">
        <ul class="nav navbar-nav">
              <li>
                <a href="https://slar.se/pages/about.html">About</a>
              </li>
              <li>
                <a href="https://slar.se/pages/projects.html">Projects</a>
              </li>
            <li class="divider"></li>
            <li class="">
              <a href="https://slar.se/archives.html">Archives</a>
            </li>
          <li class="divider"></li>
            <li><a href="https://slar.se/feeds/all.atom.xml" 
                   type="application/atom+xml" rel="alternate">
                <i class="fas fa-rss fa-fw fa-lg"></i> </a></li>
        </ul> <!-- /nav -->
      </div> <!-- /navbar-collapse -->
	  </div> <!-- /container -->
    </nav> <!-- /navbar -->

	<div class="jumbotron" id="overview">
	  <div class="container">
		<h1><a href="https://slar.se/">slar.se</a></h1>
	  </div>
	</div>

    <div class="container" id="main-container">
      <div class="row">
        <div class="col-md-9" id="content">
<article itemscope="itemscope" itemtype="http://schema.org/BlogPosting">
  <header class="article-header">
<abbr class="article-header-date">
  Thu 05 April 2018
</abbr> <h1>
  <a href="https://slar.se/properties-as-pythonic-getters.html" rel="bookmark"
     title="Permalink to Properties as Pythonic getters">
    Properties as Pythonic getters
  </a>
</h1><div class="article-header-info">
  <p>
      Posted by <a href="https://slar.se/author/simon-larsen.html">Simon Larsén</a>
    in 
    <a href="https://slar.se/category/programming.html">
      Programming</a>
    &nbsp;&nbsp;
  </p>
</div> <!-- /.article-header-info -->  </header>
  <div class="content-body" itemprop="text articleBody">
	<p>If you come from either Java or C++, you've probably written your fair
share of getter and setter (also called accessor and mutator) methods.
It is common for programmers that transition from such a language to Python
to carry over this practice. In many cases in Python, we simply forego the
abstraction and access the attributes directly. Sometimes, however, getters
and setters are useful for providing write-protection and input validation.
In this two-part series, we are going to explore how to make Pythonic setters
and getters using one of my favorite Python features: <strong>properties</strong>. </p>
<h3>Part 1 (this part): Properties as Pythonic getters</h3>
<p>In this first part, we take a look at how to use a property
to implement a read-only data attribute that can be accessed just like any other
data attribute (e.g. like <code>obj.attr</code>). Writing to it will, however, result in an
<code>AttributeError</code>. This is useful for preventing users
from accidentally changing the internal state of an object in an unintended
way, while still providing a uniform API. For example, we might want a 
way to access the root element of a binary tree, but without risking to alter 
its container.</p>
<h3><a href="https://slar.se/properties-as-pythonic-setters.html">Part 2: Properties as Pythonic setters</a></h3>
<p>In the second part, we'll have a look at how we can use properties to also
implement a setter method, with input validation, that can be utulized just 
like any plain ol' data attribute (e.g. like <code>obj.attr = 42</code>). This is useful
when the attribute has some legal set of values.</p>
<h2>The Ticker class</h2>
<p>For the purpose of learning properties, we will develop a fairly useless class
called <code>Ticker</code>. All it does is tick from <code>0</code> to some boundary, and then restart
from <code>0</code>. Two <code>Ticker</code> instances could, for example, represent a rudimentary
clock with hour and minute counts. The first version of <code>Ticker</code> is outlined
below.</p>
<div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Ticker</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;A Ticker ticks from 0 to an upper limit, and then starts over.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">end</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span> <span class="c1"># &#39;: int&#39; is an optional type hint</span>
        <span class="sd">&quot;&quot;&quot;Create a Ticker that starts over at end&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">end</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;end must be greater than 0!&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_end</span> <span class="o">=</span> <span class="n">end</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">tick</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Increment the internal count by 1.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">count</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_end</span>    
</pre></div>


<p>We can use this class something like this:</p>
<div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="n">t</span> <span class="o">=</span> <span class="n">Ticker</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">count</span>
<span class="mi">0</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">tick</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">tick</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">count</span>
<span class="mi">2</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
<span class="o">...</span>     <span class="n">t</span><span class="o">.</span><span class="n">tick</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">count</span>
<span class="mi">0</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">count</span> <span class="o">=</span> <span class="mi">42</span>    <span class="c1"># uh oh...</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">count</span>
<span class="mi">42</span>                  <span class="c1"># this is an illegal state</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">tick</span><span class="p">()</span>        <span class="c1"># back to a legal state in the next tick</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">count</span>
<span class="mi">3</span>
</pre></div>


<p>As long as the <code>count</code> variable is only read from, there are no issues with this
design. Unfortunately, directly assigning to <code>count</code> may put the <code>Ticker</code> in an
illegal state, i.e. such that <code>count</code> is outside of its expected range of
<code>[0, _end)</code>. This isn't so much an issue for the <code>Ticker</code> itself, as it is
returned to a legal state on the next tick. Other functionality
depending on the <code>Ticker</code> to keep within the <code>[0, _end)</code> range could however be
in for a nasty surprise, meaning that there is a serious usability issue here.</p>
<p>Thus to the crux:</p>
<blockquote>
<p>How do we protect the <code>count</code> variable from being put in an illegal state,
while still allowing access to it?</p>
</blockquote>
<h2>Solving the problem</h2>
<p>First of all, we should make the <code>count</code> variable private (which in Python
equates to prepending an underscore). The issue that remains to be resolved is
how to expose <code>_count</code> in the public API of the class.</p>
<h3>Solution 1: A Java-style getter</h3>
<p>A Java or C++ programmer might instinctevly think of a traditional getter method.</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_count</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return the current count.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_count</span>
</pre></div>


<p>This solution has two issues: it breaks the api, and it makes us think about
<code>count</code> as something more complicated than the mere data attribute that it
is. It would be much preferable if we could access <code>_count</code> just like we
accessed it before it was made private (i.e. with <code>t.count</code>), but at the same 
time provide write protection (such that <code>t.count = 42</code> raises an error).
Enter the <em>property</em>.</p>
<h3>Solution 2: Using a property as a read-only data attribute</h3>
<p>Implementing the same functionality as <code>get_count()</code> with a property is dead 
simple.</p>
<div class="highlight"><pre><span></span><span class="nd">@property</span>
<span class="k">def</span> <span class="nf">count</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return the current count.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_count</span>
</pre></div>


<p>We use the <code>@property</code> decorator to say that the <code>count</code> method is a property.
This will let us invoke the <code>count</code> method without providing the parens, so
it will look like we are just accessing a data attribute named <code>count</code>.
Usage now looks like below:</p>
<div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="n">t</span> <span class="o">=</span> <span class="n">Ticker</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">count</span>
<span class="mi">0</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">tick</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">tick</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">count</span>
<span class="mi">2</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
<span class="o">...</span>     <span class="n">t</span><span class="o">.</span><span class="n">tick</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">count</span>
<span class="mi">0</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">count</span> <span class="o">=</span> <span class="mi">42</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">&quot;&lt;stdin&gt;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">AttributeError</span><span class="p">:</span> <span class="n">can</span><span class="s1">&#39;t set attribute</span>
<span class="n">can</span><span class="s1">&#39;t set attribute</span>
</pre></div>


<p>Excellent! We have the exact same API as when <code>count</code> was a public attribute,
but without the risk of accidental overwriting. This is precisely what we wanted,
and a Pythonic way of dealing with the issue of providing read access to fragile
state variables.</p>
<h3>Ticker full listing</h3>
<p>It always annoys me when I get to the conclusion of some tutorial, and the end
result is just assumed to be obvious. Therefore, here is the full listing of
<code>Ticker</code> with a property as a getter.</p>
<div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Ticker</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;A Ticker ticks from 0 to an upper limit, and then starts over.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">end</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a Ticker that starts over at end&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">end</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;end must be greater than 0!&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_end</span> <span class="o">=</span> <span class="n">end</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_count</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">tick</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Increment the internal count by 1.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_count</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_end</span>    

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">count</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the current count.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_count</span>
</pre></div>


<p>Now is about the time to move on to
<a href="https://slar.se/properties-as-pythonic-setters.html">Part 2</a>, in which we expand on the <code>count</code>
property to allow us to set the internal count, but only within the range <code>[0,
_end)</code>!</p>
  </div>
  

</article>
        </div><!-- /content -->

        <div class="col-md-3 sidebar-nav" id="sidebar">

<div class="row">

<div class="col-xs-6 col-md-12">
<h4><i class="fas fa-comment fa-fw fa-lg"></i> Social</h4>
<ul class="list-unstyled social-links">
    <li><a href="https://www.linkedin.com/in/simon-lars%C3%A9n-b665b3102/" target="_blank">
	  <i class="fab fa-linkedin fa-fw fa-lg" title="LinkedIn"></i>
		LinkedIn
	</a></li>
    <li><a href="https://github.com/slarse" target="_blank">
	  <i class="fab fa-github-square fa-fw fa-lg" title="GitHub"></i>
		GitHub
	</a></li>
</ul>
</div>

<div class="col-xs-6 col-md-12">
<h4><i class="fas fa-folder fa-fw fa-lg"></i> Categories</h4>
<ul class="list-unstyled category-links">
  <li><a href="https://slar.se/category/blog.html" >
    <i class="fas fa-folder-open fa-fw fa-lg"></i> Blog</a></li>
  <li><a href="https://slar.se/category/programming.html" >
    <i class="fas fa-folder-open fa-fw fa-lg"></i> Programming</a></li>
  <li><a href="https://slar.se/category/testing.html" >
    <i class="fas fa-folder-open fa-fw fa-lg"></i> Testing</a></li>
  <li><a href="https://slar.se/category/tip-of-the-week.html" >
    <i class="fas fa-folder-open fa-fw fa-lg"></i> Tip of the Week</a></li>
</ul>
</div>

</div> <!-- /row -->

<h4><i class="fas fa-tags fa-fw fa-lg"></i> Tags</h4>
<p class="tag-cloud">
      <a href="https://slar.se/tag/totw.html">
        <i class="fas fa-tag fa-fw fa-lg"></i>totw
      </a>
      <a href="https://slar.se/tag/bash.html">
        <i class="fas fa-tag fa-fw fa-lg"></i>bash
      </a>
      <a href="https://slar.se/tag/blog.html">
        <i class="fas fa-tag fa-fw fa-lg"></i>blog
      </a>
      <a href="https://slar.se/tag/unit-testing.html">
        <i class="fas fa-tag fa-fw fa-lg"></i>unit testing
      </a>
      <a href="https://slar.se/tag/testing-tips.html">
        <i class="fas fa-tag fa-fw fa-lg"></i>testing tips
      </a>
      <a href="https://slar.se/tag/exposed.html">
        <i class="fas fa-tag fa-fw fa-lg"></i>exposed
      </a>
      <a href="https://slar.se/tag/kotlin.html">
        <i class="fas fa-tag fa-fw fa-lg"></i>kotlin
      </a>
      <a href="https://slar.se/tag/kuizzy.html">
        <i class="fas fa-tag fa-fw fa-lg"></i>kuizzy
      </a>
      <a href="https://slar.se/tag/tornadofx.html">
        <i class="fas fa-tag fa-fw fa-lg"></i>tornadofx
      </a>
      <a href="https://slar.se/tag/html.html">
        <i class="fas fa-tag fa-fw fa-lg"></i>html
      </a>
      <a href="https://slar.se/tag/css.html">
        <i class="fas fa-tag fa-fw fa-lg"></i>css
      </a>
      <a href="https://slar.se/tag/javascript.html">
        <i class="fas fa-tag fa-fw fa-lg"></i>javascript
      </a>
      <a href="https://slar.se/tag/bst.html">
        <i class="fas fa-tag fa-fw fa-lg"></i>bst
      </a>
      <a href="https://slar.se/tag/data-structures.html">
        <i class="fas fa-tag fa-fw fa-lg"></i>data structures
      </a>
      <a href="https://slar.se/tag/gradle.html">
        <i class="fas fa-tag fa-fw fa-lg"></i>gradle
      </a>
      <a href="https://slar.se/tag/intellij.html">
        <i class="fas fa-tag fa-fw fa-lg"></i>intellij
      </a>
      <a href="https://slar.se/tag/python.html">
        <i class="fas fa-tag fa-fw fa-lg"></i>python
      </a>
      <a href="https://slar.se/tag/podcast.html">
        <i class="fas fa-tag fa-fw fa-lg"></i>podcast
      </a>
</p>
<h4><i class="fas fa-rss fa-fw fa-lg"></i> Feeds</h4>
<ul class="list-unstyled">
    <li><a href="https://slar.se/feeds/all.atom.xml" 
		   type="application/atom+xml" rel="alternate">
		<i class="fas fa-rss-square fa-fw fa-lg"></i> Atom Feed</a></li>
</ul>

<hr />

        </div><!--/sidebar -->
      </div><!--/row-->
    </div><!--/.container /#main-container -->

    <footer id="site-footer">
 
      <address id="site-colophon">
        <p class="text-center text-muted">
        Site built using <a href="http://getpelican.com/" target="_blank">Pelican</a>
        &nbsp;&bull;&nbsp; Theme based on
        <a href="http://www.voidynullness.net/page/voidy-bootstrap-pelican-theme/"
           target="_blank">VoidyBootstrap</a> by 
        <a href="http://voidynullness.net"
           target="_blank">RKI</a>  
        </p>
      </address><!-- /colophon  -->
    </footer>


    <!-- javascript -->
   
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js" integrity="sha384-nvAa0+6Qg9clwYCGGPpDQLVpLNn0fRaROjHqs13t4Ggj3Ez50XnGQqc/r8MhnRDZ" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"
            integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
            crossorigin="anonymous"></script>


  </body>
</html>